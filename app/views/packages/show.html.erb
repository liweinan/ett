<h2>
<span style="<%= deleted_style(@package) %>">
<%= h @package.name %>
  @<%= link_to @package.task.name, :controller => 'packages', :action => 'index', :task_id => escape_url(@package.task.name) %>
</span>
</h2>

Created By:
<% unless @package.created_by.blank? %>
    <%= h @package.creator.name %>
<% else %>
    -
<% end %>
/
Assignee:
<% if !@package.user_id.blank? %>
    <%= h @package.user.name %>
<% end %>
<%= render :partial => 'layouts/sep_tiny' %>
Created At:
<%= at_zone(@package.created_at) %>
/
Last Modified At:
<%= at_zone(@package.updated_at) %>
<%= render :partial => 'layouts/sep_tiny' %>


Status:
<% unless @package.status.blank? %>
    <span style="<%= default_style(@package.status.style) %>">&nbsp;</span>
    <%= h @package.status.name %>    
<% end %>
<%= render :partial => 'layouts/sep_tiny' %>


Tags:
<% unless @package.tags.blank? %>    
    <% @package.tags.each do |tag| %>
        <%= tag.key %> /
    <% end %>
<% end %>

<% get_xattrs(@package.task, true, false) do |attr| %>
    <%= render :partial => 'layouts/sep_tiny' %>
    <% unless @package.read_attribute(attr).blank? %>
        <%= attr.camelcase %>: <%= Extractor.extract_url(@package.read_attribute(attr)) %>
    <% end %>
<% end %>

<%= render :partial => 'packages/fields/track_time' %>

<% if can_edit_package? @package %>
    <%= link_to 'Edit', :controller => 'packages', :action => 'edit', :id => escape_url(@package.name) %>
<% end %>

<% if can_manage? %>
    <% unless @package.deleted? %>
        | <%= link_to 'Clone', :controller => :packages, :action => :clone, :id => escape_url(@package.name), :task_id => escape_url(@package.task.name) %>
        | <%= link_to 'Delete', @package, 
            :confirm => "Are you sure to delete #{escape_url(@package.name)}?", 
            :method => :delete %>
    <% end %>
<% end %>

<%= render :partial => 'packages/notes' %>
<%= render :partial => 'layouts/sep' %>

<%= render :partial => 'packages/relationships' %>
<%= render :partial => 'layouts/sep' %>

<%= render :partial => 'packages/attachment' %>
<%= render :partial => 'layouts/sep' %>
<% unless @package.task.target_release.blank? %>
    <%= render :partial => 'packages/bz_bugs', :locals => {:package => @package} %>
    <%= render :partial => 'layouts/sep' %>
<% end %>
<%= render :partial => 'changelog' %>
<%= render :partial => 'layouts/sep' %>

<%= render :partial => "comments/index" %>
<% if logged_in? %>
    <%= render :partial => "comments/new" %>
<% end %>

<%= render :partial => 'time_tracking_js' %>
<% content_for :js do %>
    <script type="text/javascript">
        Event.observe(window, 'load', function () {
            new Ajax.Request('/toolbox/get_manual_time_track_component',
                    {
                        asynchronous: true,
                        evalScripts: true,
                        parameters: {
                            'pac_id': '<%=@package.id%>',
                            'authenticity_token': '<%=form_authenticity_token%>'}
                    });
        });
    </script>
<% end %>